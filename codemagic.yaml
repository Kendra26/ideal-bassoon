workflows:
  default:
    name: Build and Upload
    max_build_duration: 180
    scripts:
      - name: Install dependencies
        script: |
          sudo apt update
          sudo apt install -y aria2
          mkdir -p downloads

      - name: Download torrents
        script: |
          echo "Starting torrent download..."
          curl -s https://textdoc.co/5xvG5PnuTb838mhsX | grep -oP 'magnet:\S+' > links.txt
          aria2c --seed-time=0 --dir=downloads --select-file=66-99 --file-allocation=none -i links.txt
          echo "Uploading files to Pixeldrain..."
          
          find downloads -type f -print0 | while IFS= read -r -d '' file; do
                curl -X POST "https://upload.gofile.io/uploadfile" \
                     -H "Authorization: Bearer p2986wPNaFeImJzfgw9UmwTFaKdDihpO" \
                     -F "file=@\"$file\"" \
                     -F "folderId=48ad7d1d-4280-4e83-bc05-627b9c091399"
              done
